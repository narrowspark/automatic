includes:
#    - vendor/pepakriz/phpstan-exception-rules/extension.neon
    - %rootDir%/../phpstan-deprecation-rules/rules.neon
    - %rootDir%/../phpstan-mockery/extension.neon
    - %rootDir%/../phpstan-phpunit/extension.neon
    - %rootDir%/../phpstan-phpunit/rules.neon
    - %rootDir%/../phpstan-strict-rules/rules.neon
#    - %rootDir%/../../thecodingmachine/phpstan-strict-rules/phpstan-strict-rules.neon
    - %rootDir%/../phpstan/conf/bleedingEdge.neon
    - %rootDir%/../../slam/phpstan-extensions/conf/slam-rules.neon

parameters:
    level: max
    inferPrivatePropertyTypeFromConstructor: true

    autoload_directories:
        - %currentWorkingDirectory%/src

    excludes_analyse:
        - %currentWorkingDirectory%/src/Prefetcher/Downloader/CurlDownloader.php
        - %currentWorkingDirectory%/src/Prefetcher/Downloader/ParallelDownloader.php
        - %currentWorkingDirectory%/src/Prefetcher/ComposerRepository.php
        - %currentWorkingDirectory%/src/Prefetcher/Prefetcher.php
        - %currentWorkingDirectory%/src/Prefetcher/TruncatedComposerRepository.php
        - %currentWorkingDirectory%/src/Automatic/Configurator/Traits/AppendToFileTrait.php

    ignoreErrors:
        - '#should end with "Interface" suffix#'
        # QuestionInstallationManager
        - '#\$package of method Composer\\Package\\Version\\VersionSelector\:\:findRecommendedRequireVersion\(\) expects Composer\\Package\\PackageInterface, Composer\\Package\\PackageInterface\|true given#'
        # ScriptExtender
        - '#Parameter \#1 \$stream of class Symfony\\Component\\Console\\Output\\StreamOutput constructor expects resource, resource\|false given#'

        - '#Call to an undefined method Composer\\DependencyResolver\\Operation\\OperationInterface\:\:getPackage#'

        # Automatic
        - '#does not call parent constructor from Composer\\Repository\\ComposerRepository#'
        - '#Call to function method_exists\(\) with Symfony\\Component\\Console\\Style\\SymfonyStyle and#'

        # CopyFromPackageConfigurator
        - '#Variable method call on Symfony\\Component\\Filesystem\\Filesystem#'

        # EnvConfigurator - phpstan missing support
        - '#Strict comparison using \!== between bool and null will always evaluate to true#'

        # Package
        - '#Variable method call on Narrowspark\\Automatic\\Common\\Package#'

        # PhpScriptExtender
        - "#Casting to string something that's already string#"

        # GetGenericPropertyReaderTrait
        - '#Variable property access on object#'

        - '#Parameter \#2 \$constraint of anonymous function has no typehint#'
